<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento de Saúde</title>
    
    <!-- Google Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Link para o arquivo CSS -->
    <link rel="stylesheet" href="../CSS/dashboard-client.css">
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

</head>
<body>

    <!-- 1. Cabeçalho Principal -->
    <header class="main-header">
        <div class="container header-container">
            <!-- Lado Esquerdo: Título -->
            <div class="header-title">
                <h1>Monitoramento de Saúde</h1>
                <p>Acompanhamento via smartwatch em tempo real</p>
            </div>
            
            <!-- Lado Direito: Usuário e Sair -->
            <div class="header-nav">
                <div class="user-info">
                    <p class="user-name">   </p>
                    <p class="user-role">Responsável</p>
                </div>
                <!-- Ícone do Usuário -->
                <div class="user-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                </div>
                <!-- Botão Sair -->
                <button class="button-logout">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    <span>Sair</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="container">

        <!-- 2. Card de Perfil -->
        <section class="card profile-card">
            <div class="profile-info">
                <!-- Ícone do Perfil -->
                <div class="profile-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                </div>
                <div>
                    <h2 class="profile-name">Paciente</h2>
                    <p class="profile-details">Idade</p>
                </div>
            </div>
            <button class="button button-outline">
                Trocar Perfil
            </button>
        </section>

        <!-- 3. Card do Dispositivo (Smartwatch) -->
        <section class="card device-card">
            <div class="device-header">
                <div class="device-title">
                    <svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h3>Smartwatch Conectado</h3>
                </div>
                <div class="device-status-controls">
                    <span class="status-online">
                        <span class="status-dot"></span>
                        Online
                    </span>
                    <button class="button button-outline button-pause">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1zm4 0a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                        <span>Pausar</span>
                    </button>
                </div>
            </div>
            <div class="device-info">
                <p>ID: SW8GISM2</p>
                <p>Sincronização automática a cada 5 minutos</p>
            </div>
        </section>

        <!-- 4. Abas de Navegação -->
        <nav class="tabs-nav">
            <button class="tab-button active" data-tab="monitoramento">
                Monitoramento
            </button>
            <button class="tab-button" data-tab="localizacao">
                Localização
            </button>
            <button class="tab-button" data-tab="emergencia">
                Emergência
            </button>
        </nav>

        <!-- 5. Conteúdo das Abas -->
        
        <!-- Aba: Monitoramento -->
        <section id="monitoramento" class="tab-content active">
            <!-- Grade de Sinais Vitais -->
            <section class="stats-grid">
                <!-- Card: Passos Diários -->
                <div class="card stat-card border-yellow">
                    <div class="stat-header">
                        <span class="stat-title">Passos Diários</span>
                        <div class="stat-icon bg-yellow">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22a2 2 0 0 0 2-2V14a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2Z"></path><path d="M12 12A2 2 0 0 0 10 10V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2Z"></path><path d="M16 10a2 2 0 0 1-2-2V2"></path><path d="M9 14a2 2 0 0 0-2-2H2"></path><path d="M15 22a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2Z"></path></svg>
                        </div>
                    </div>
                    <div class="stat-body">
                        <span class="stat-value">4.895</span>
                        <p class="stat-meta">Meta: 5.000 passos/dia</p>
                    </div>
                </div>
                
                <!-- Card: Saturação de O₂ -->
                <div class="card stat-card border-green">
                    <div class="stat-header">
                        <span class="stat-title">Saturação de O₂</span>
                        <div class="stat-icon bg-green">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        </div>
                    </div>
                    <div class="stat-body">
                        <span class="stat-value">97 <span class="stat-unit">%</span></span>
                        <p class="stat-meta">Normal: 95-100%</p>
                    </div>
                </div>

                <!-- Card: Temperatura -->
                <div class="card stat-card-faded">
                    <div class="stat-header">
                        <span class="stat-title">Temperatura</span>
                        <div class="stat-icon bg-green-faded">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2Z"></path></svg>
                        </div>
                    </div>
                    <div class="stat-body">
                        <span class="stat-value">36.8 <span class="stat-unit">°C</span></span>
                        <p class="stat-meta">Normal: 36-37.5°C</p>
                    </div>
                </div>

                <!-- Card: Pressão Arterial -->
                <div class="card stat-card-faded">
                    <div class="stat-header">
                        <span class="stat-title">Pressão Arterial</span>
                        <div class="stat-icon bg-red-faded">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg>
                        </div>
                    </div>
                    <div class="stat-body">
                        <span class="stat-value">118/74 <span class="stat-unit">mmHg</span></span>
                        <p class="stat-meta">Normal: 120/80 mmHg</p>
                    </div>
                </div>
            </section>
            
            <!-- Seção de Gráficos -->
            <section class="charts-section">
                <!-- Gráfico 1: Saturação de O₂ e Temperatura -->
                <div class="card chart-card">
                    <h3>Saturação de O₂ e Temperatura</h3>
                    <div class="chart-container">
                        <canvas id="chartO2Temp"></canvas>
                    </div>
                </div>

                <!-- Gráfico 2: Pressão Arterial -->
                <div class="card chart-card">
                    <h3>Pressão Arterial</h3>
                    <div class="chart-container">
                        <canvas id="chartPressao"></canvas>
                    </div>
                </div>

                <!-- Gráfico 3: Passos Diários -->
                <div class="card chart-card">
                    <h3>Passos Diários</h3>
                    <div class="chart-container">
                        <canvas id="chartPassos"></canvas>
                    </div>
                </div>
            </section>
        </section>

        <!-- Aba: Localização -->
        <section id="localizacao" class="tab-content">
            <div class="card location-card">
                <div class="location-header">
                    <div class="location-title">
                        <svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        <h3>Localização GPS</h3>
                    </div>
                    <span class="location-precision">
                         <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                        Precisão: 18m
                    </span>
                </div>
                <div class="map-placeholder">
                    <div class="map-controls">
                        <button>+</button>
                        <button>-</button>
                    </div>
                    <div class="map-dot"></div>
                </div>
            </div>
        </section>

        <!-- Aba: Emergência -->
        <section id="emergencia" class="tab-content">
            <div class="card emergency-card">
                <div class="emergency-header">
                    <div class="emergency-title">
                        <svg class="icon-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        <div>
                            <h3>Contatos de Emergência</h3>
                            <p>Números para acionar em caso de urgência</p>
                        </div>
                    </div>
                    <button class="button button-add">
                        <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        <span>Adicionar</span>
                    </button>
                </div>
                <div class="empty-state">
                    <div class="empty-icon">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <p class="empty-text-primary">Nenhum contato de emergência cadastrado</p>
                    <p class="empty-text-secondary">Adicione pelo menos um contato para situações de urgência</p>
                </div>
            </div>
        </section>

    </main>

    <!-- JavaScript para Abas e Gráficos -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // === FUNCIONALIDADE DAS ABAS ===
            const tabs = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove 'active' de todas as abas e conteúdos
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));

                    // Adiciona 'active' à aba clicada
                    tab.classList.add('active');
                    
                    // Adiciona 'active' ao conteúdo correspondente
                    const targetContent = document.getElementById(tab.dataset.tab);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });

            // === FUNÇÕES DE DADOS DE EXEMPLO ===
            
            // Gera timestamps (marcas de tempo)
            function generateTimestamps(count, intervalSeconds = 5) {
                const data = [];
                let currentTime = new Date().getTime() - (count * intervalSeconds * 1000);
                for (let i = 0; i < count; i++) {
                    data.push(new Date(currentTime));
                    currentTime += intervalSeconds * 1000;
                }
                return data;
            }

            // Gera dados de scatter (dispersão)
            function generateScatterData(timestamps, min, max) {
                return timestamps.map(time => ({
                    x: time,
                    y: Math.random() * (max - min) + min
                }));
            }
            
            const pointCount = 60; // 60 pontos de dados
            const timestamps = generateTimestamps(pointCount, 2); // A cada 2 segundos
            
            // === GRÁFICO 1: O₂ e Temperatura (Eixo Duplo) ===
            const ctxO2Temp = document.getElementById('chartO2Temp');
            if (ctxO2Temp) {
                new Chart(ctxO2Temp, {
                    type: 'scatter',
                    data: {
                        datasets: [
                            {
                                label: 'Saturação (%)',
                                data: generateScatterData(timestamps, 96, 99.5),
                                backgroundColor: 'rgb(59, 130, 246)', // Azul
                                yAxisID: 'yO2',
                            },
                            {
                                label: 'Temperatura (°C)',
                                data: generateScatterData(timestamps, 36.5, 37.1),
                                backgroundColor: 'rgb(239, 68, 68)', // Vermelho
                                yAxisID: 'yTemp',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        showLine: false,
                        pointRadius: 3,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'second',
                                    tooltipFormat: 'HH:mm:ss',
                                    displayFormats: {
                                        second: 'HH:mm:ss'
                                    }
                                },
                                title: {
                                    display: false,
                                }
                            },
                            yO2: { // Eixo Y Esquerdo para O₂
                                type: 'linear',
                                position: 'left',
                                min: 90,
                                max: 100,
                                title: {
                                    display: true,
                                    text: 'Saturação (%)'
                                }
                            },
                            yTemp: { // Eixo Y Direito para Temperatura
                                type: 'linear',
                                position: 'right',
                                min: 35,
                                max: 40,
                                title: {
                                    display: true,
                                    text: 'Temperatura (°C)'
                                },
                                grid: {
                                    drawOnChartArea: false, // Não desenha a grade deste eixo no gráfico
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        }
                    }
                });
            }

            // === GRÁFICO 2: Pressão Arterial ===
            const ctxPressao = document.getElementById('chartPressao');
            if (ctxPressao) {
                new Chart(ctxPressao, {
                    type: 'scatter',
                    data: {
                        datasets: [
                            {
                                label: 'Sistólica (mmHg)',
                                data: generateScatterData(timestamps, 125, 140),
                                backgroundColor: 'rgb(16, 185, 129)', // Verde
                            },
                            {
                                label: 'Diastólica (mmHg)',
                                data: generateScatterData(timestamps, 75, 85),
                                backgroundColor: 'rgb(139, 92, 246)', // Roxo
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        showLine: false,
                        pointRadius: 3,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'second',
                                    tooltipFormat: 'HH:mm:ss',
                                    displayFormats: {
                                        second: 'HH:mm:ss'
                                    }
                                },
                            },
                            y: {
                                min: 35,
                                max: 150,
                                title: {
                                    display: true,
                                    text: 'mmHg'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom',
                            }
                        }
                    }
                });
            }

            // === GRÁFICO 3: Passos Diários ===
            const ctxPassos = document.getElementById('chartPassos');
            if (ctxPassos) {
                new Chart(ctxPassos, {
                    type: 'scatter',
                    data: {
                        datasets: [
                            {
                                label: 'Passos',
                                data: generateScatterData(timestamps, 4500, 6500),
                                backgroundColor: 'rgb(245, 158, 11)', // Laranja/Amarelo
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        showLine: false,
                        pointRadius: 3,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'second',
                                    tooltipFormat: 'HH:mm:ss',
                                    displayFormats: {
                                        second: 'HH:mm:ss'
                                    }
                                },
                            },
                            y: {
                                min: 0,
                                max: 9000,
                                title: {
                                    display: true,
                                    text: 'Passos'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false, // O gráfico original não tem legenda
                            }
                        }
                    }
                });
            }

        });
    </script>
</body>
</html>